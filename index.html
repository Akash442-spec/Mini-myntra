<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Myntra</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    body { font-family: Arial, sans-serif; background: #fffefe; margin: 0; }
    h1 { text-align: center; color: #ff6600; margin-top: 20px; }

    .navbar {
      background: #ff6600;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(255, 253, 253);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .navbar a {
      color: rgb(255, 255, 255);
      text-decoration: none;
      margin-left: 15px;
      font-weight: bold;
    }
    .navbar a:hover { text-decoration: underline; }
    .cart-link { position: relative; display: inline-block; }
    .cart-badge {
      position: absolute; top: -8px; right: -12px;
      background: rgb(255, 255, 255); color: #ff6600; font-size: 12px;
      font-weight: bold; border-radius: 50%;
      padding: 3px 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 800px; margin: 40px auto; padding: 0 20px; }
    .card { background: rgb(255, 255, 255); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 15px; text-align: center; transition: 0.3s; }
    .card:hover { transform: scale(1.05); }
    .card img { width: 100%; border-radius: 12px; }
    .name { font-size: 18px; font-weight: bold; margin: 10px 0; color: #333; }
    .price { color: #ff6600; font-size: 16px; margin: 5px 0; }
    .btn { background: #ff6600; color: rgb(255, 255, 255); padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; }
    .btn:hover { background: #e65c00; }
    .actions { margin-top: 10px; }
  </style>
</head>
<body>
  <div class="navbar">
    <div><b>Mini Myntra</b></div>
    <div>
      <span>Welcome, {{ user }}</span>
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('cart') }}" class="cart-link">ðŸ›’ Cart
        {% if cart_count > 0 %}<span class="cart-badge">{{ cart_count }}</span>{% endif %}
      </a>
      <a href="{{ url_for('logout') }}">Logout</a>
    </div>
  </div>
  

  <div class="toolbar" style="max-width:800px;margin:20px auto 0;padding:0 20px;display:flex;justify-content:flex-end;align-items:center;">
   <form method="get" action="{{ url_for('home') }}">
    <label for="sort" style="margin-right:8px;color:#555;">Sort by:</label>
    <select id="sort" name="sort" onchange="this.form.submit()" style="padding:6px 10px;border-radius:6px;border:1px solid #ddd;">
      <option value="price_asc"  {{ 'selected' if selected_sort=='price_asc'  else '' }}>Price: Low to High</option>
      <option value="price_desc" {{ 'selected' if selected_sort=='price_desc' else '' }}>Price: High to Low</option>
      <option value="popularity" {{ 'selected' if selected_sort=='popularity' else '' }}>Popularity</option>
      <option value="new"        {{ 'selected' if selected_sort=='new'        else '' }}>Whatâ€™s New</option>
    </select>
   </form>
  </div>

  <div class="container">
    {% for product in products %}
    <div class="card">
      <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}">
      <div class="name">{{ product.name }}</div>
      <div class="price">â‚¹{{ product.price }}</div>

      <!-- Use POST to add to cart -->
      <div class="actions">
        <form action="{{ url_for('add_to_cart', product_id=product.id) }}" method="post" style="display:inline;">
          <button type="submit" class="btn">Add to Cart</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</body>
</html>
